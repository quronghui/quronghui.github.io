---
layout: post
title: Pointer
date: 2019-03-22 14:42:36
categories: 
 - [LinuxC]
 - [Pointer]
tags: pointer
---

# Pointer (指针)



## 指针的基本操作

### 理解指针

1. 堆栈和队列

   + 堆栈有栈顶指针，队列有头指针和尾指针
   + 这种指针本质：是一个整数，是数组的索引

2. 指针概念

   + 把一个变量所在的内存单元的**地址**
   + 保存在另外一个内存单元 
   + 此**内存单元** 称为指针

   ```
   int i;
   int *pi = &i;	/*全局变量的赋值：右边必须是常量表达式*/
   char c;
   char *pc = &c;	/*32位的虚拟机，他们的内存单元都是4 byte*/
   ```

### 根据指针知找到变量

1. {% asset_img pointer.png %}

### 指针的关系

1. - &运算符的操作数必须是左值,因为只有左值（变量）才表示一个内存单元,才会有地址,
   - 表达式E可以做左值（变量），*&E = E
   - E是指针类型，&*E = E

   ```
   int *p;		/*定义指针类型p*/
   p = &i;		/*此时p保存的是i的地址*/
   int j = *p;	/*此时 *p = *&i; 也就是i的值*/
   ```

   

2. 指针间的赋值

   ```
   int *ptri;
   ptri = pi;		/*是把变量pi所保存的地址值赋给变量ptri*/			
   ```

   + /*保证ptri 和 pi是同一种类型，否则需要强制转化
   + 指针很容易指向错误的地址，访问这样的地址可能导致段错误

### 空指针和野指针

+ 定义局部类型的指针变量，却没有赋值 -- 野指针(Unbound Pointer)（和局部变量定义却不赋值）

+ 避免野指针，定义指针变量因该赋值，货值初始化NULL

  ```
  int *p = NULL;
  #define NULL ((void *)0)	/*将地址0转换为指针类型*/
  /*任何对地址0的访问都会立刻产生段错误*/
  ```

### void * 类型

1. void *指针与其它类型的指针之间可以隐式转换,而不必用类型转换运算符。
2. 只能定义void *指针，而不能定义void 型的变量。
3. 因为void *指针和别的指针一样都占4个字节，void型的变量就不清楚了

